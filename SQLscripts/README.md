
# TreeNSI
SQL-скрипты для облегчения работы и ввода данных в систему

При использовании Code-First методов EF оказывается не достаточно, что-бы полноценно описать структуру БД (в частности, неоходимо использовать представления MS SQL, тогда как EF создает их как таблицы). Набор скриптов не только оптимизирует структуру БД, но и введет необходимые для дальнейшей работы данные.

FirstStarter.sql

Основной скрипт, который проверяет и приводит структуру БД в рабочее состояние. Рекомендуется запускать либо после первого запуска программы (Code-First) либо после создания БД в MS SQL вручную и выполенения скрипта по созданию основных таблиц DB_First.sql (DB-First). Проверит и создаст необходимые таблицы, представления, процедуры и функции.

Внимание!

Перед выполнением необходимо убедиться в наличии нужного COLLATE в БД. Часть процедур, представлений и функций активно используют оператор LIKE, для корректного использования которого необходимо совпадение COLLATE БД и COLLATE колонок самих таблиц.

PeriodicDataHelper.sql

Скрипт, создающий процедуры использования ранее созданных представлений в качестве испочников данных для выборки периодических данных на указанную дату. Может использоваться в пользовательском UI.

InsertBasePeriodicElementHelper.sql

Процедура для ввода типового периодического элемента системы (например, Установки или склада, резервуара). Проверяет правильность ввода и записывает основные параметры периодического элемента на указанную дату.

InsertNomenckatureHelper.sql

Набор процедур для ввода первичной информации для нового элемента номенклатуры. При введении проверяется возможность дублирования информации, правильное указание подчинения и проч.

InsertAddressHelper.sql

Набор процедур для ввода адресов. В частности для адресов РБ проверяется наличие в БД уже введенного АТЕ, поиск и автоматический ввод АТЕ из САТАО (если таблица с САТАО для РБ уже заполнена, например, был выполнен скрипт BYAddressesClassifierDataInsert.sql из каталога Data).

InsertCounteragentHelper.sql

Набор процедур для вовда первичной информации для нового Контрагента. Помимо контроля на дублирование информации и создания краткого наименования (без аббривиатур), так же произовится контроль запонения основных регистрационных номеров и структуры подчинения.